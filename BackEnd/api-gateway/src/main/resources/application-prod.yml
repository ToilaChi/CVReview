spring:
  cloud:
    gateway:
      server:
        webflux:
          httpclient:
            connect-timeout: 90000  
            response-timeout: 90s
            wiretap: true
          routes:
            - id: auth-service
              uri: ${AUTH_SERVICE_URL}
              predicates:
                - Path=/auth/**
                - Method=GET,POST,PUT,DELETE
              filters:
                - name: Retry
                  args:
                    retries: 3
                    statuses: BAD_GATEWAY,SERVICE_UNAVAILABLE
                    backoff:
                      firstBackoff: 50ms
                      maxBackoff: 500ms

            - id: recruitment-service
              uri: ${RECRUITMENT_SERVICE_URL}
              predicates:
                - Path=/positions/**,/cv/**,/upload/**,/analysis/**,/tracking/**,/debug/**
                - Method=GET,POST,PUT,DELETE
              filters:
                - name: Retry
                  args:
                    retries: 3
                    statuses: BAD_GATEWAY,SERVICE_UNAVAILABLE

  http:
    codecs:
      max-in-memory-size: 52428800  # 50MB in bytes

logging:
  level:
    reactor.netty.http.client: DEBUG

jwt:
  secret: ${JWT_SECRET}